import{C as w}from"./Card.0269d18d.js";import{R as x,b as B,j as o,F as A,C as M,e as R,f as O,a as S,g as k,h as T,k as U}from"./index.698c2779.js";import{u as $}from"./useCraneUrl.83474cdd.js";import{u as j,a as I,b as Q}from"./useIsValidPanel.18ece626.js";const v=x.memo(({panel:s,selectedDashboard:r})=>{var d,C,g;const c=B(t=>t.config.chartBaselineHeight),u=B(t=>t.config.chartDefaultHeight),m=B(t=>t.insight.selectedNamespace),e=$(),a=j({panel:s}),y=I({selectedDashboard:r}),h=Q({panelId:s.id,selectedDashboard:r}),f=((d=s==null?void 0:s.gridPos)==null?void 0:d.w)>0&&((C=s==null?void 0:s.gridPos)==null?void 0:C.w)<=24?Math.floor(s.gridPos.w/2):6,l=(g=s==null?void 0:s.gridPos)!=null&&g.h?Math.max(s.gridPos.h*c,u):u,F=t=>(console.log("================",t.title),t.title==="Estimated Monthly Cluster Resource Costs"||t.title==="Node Resource Cost & Utilization"||t.title==="CPU Hourly Costs Over Time By Namespace ${namespace}"||t.title==="RAM Hourly Costs Over Time By Namespace ${namespace}"||t.title==="Hourly Costs Over Time By Namespace ${namespace}"||t.title==="namespace(${namespace}) total usage costs");let i=null;return(s==null?void 0:s.title)==="Estimated Monthly Cluster Resource Costs"?i="\u9884\u8BA1\u6BCF\u6708\u96C6\u7FA4\u8D44\u6E90\u6210\u672C":(s==null?void 0:s.title)==="Node Resource Cost & Utilization"?i="\u8282\u70B9\u8D44\u6E90\u6210\u672C\u4E0E\u5229\u7528\u7387":(s==null?void 0:s.title)==="CPU Hourly Costs Over Time By Namespace crane-system"?i="\u4E0D\u540C\u547D\u540D\u7A7A\u95F4\u7684 CPU \u6BCF\u5C0F\u65F6\u6210\u672C crane-system":(s==null?void 0:s.title)==="RAM Hourly Costs Over Time By Namespace crane-system"?i="\u4E0D\u540C\u547D\u540D\u7A7A\u95F4\u7684 \u5185\u5B58 \u6BCF\u5C0F\u65F6\u6210\u672C crane-system":(s==null?void 0:s.title)==="Hourly Costs Over Time By Namespace crane-system"?i="\u4E0D\u540C\u547D\u540D\u7A7A\u95F4\u7684\u6BCF\u5C0F\u65F6\u6210\u672C crane-system":(s==null?void 0:s.title)==="namespace(crane-system) total usage costs"&&(i="namespace(crane-system) \u603B\u4F7F\u7528\u6210\u672C"),y&&!m||!a?null:o(A,{children:F(s)&&o(M,{span:f,children:R(w,{style:{marginBottom:"0.5rem",marginTop:"0.5rem",height:l},children:[o("div",{children:i}),o("iframe",{frameBorder:"0",height:"100%",src:`${e}/grafana/d-solo/${r==null?void 0:r.uid}/costs-by-dimension?${h}`,width:"100%"})]})},s.id)})});var W=O.exports.memo(()=>{var y,h,f,l,F,i,d,C,g,t,N,E,P,H;const{t:s}=S(),r=$();console.log("craneUrl",r);const c=k({craneUrl:r},{skip:!r});console.log("dashboardList",c);const u=((y=c==null?void 0:c.data)!=null?y:[]).find(n=>n.uid==="cluster-overview");console.log("selectedDashboard1",u);const m=T({dashboardUid:u==null?void 0:u.uid},{skip:!(u!=null&&u.uid)});console.log("dashboardDetail1",m);const e=((h=c==null?void 0:c.data)!=null?h:[]).find(n=>n.uid==="namespace-costs"),a=T({dashboardUid:e==null?void 0:e.uid},{skip:!(e!=null&&e.uid)});return console.log("dashboardDetail2",a),R(A,{children:[o(U,{style:{marginTop:10},children:!(u!=null&&u.uid)||((F=(l=(f=m==null?void 0:m.data)==null?void 0:f.dashboard)==null?void 0:l.panels)==null?void 0:F.length)===0?o("span",{children:s("\u6682\u65E0\u6570\u636E")}):((C=(d=(i=m==null?void 0:m.data)==null?void 0:i.dashboard)==null?void 0:d.panels)!=null?C:[]).map(n=>o(v,{panel:n,selectedDashboard:u},n.id))}),o(U,{style:{marginTop:10},children:!(e!=null&&e.uid)||((N=(t=(g=a==null?void 0:a.data)==null?void 0:g.dashboard)==null?void 0:t.panels)==null?void 0:N.length)===0?o("span",{children:s("\u6682\u65E0\u6570\u636E")}):((H=(P=(E=a==null?void 0:a.data)==null?void 0:E.dashboard)==null?void 0:P.panels)!=null?H:[]).map(n=>o(v,{panel:n,selectedDashboard:e},n.id))})]})});export{W as default};
