import{C as N}from"./Card.0269d18d.js";import{R as y,b as a,j as e,F as l,C as z,e as M,f as w,a as x,g as F,h as q,k as H}from"./index.698c2779.js";import{u as B}from"./useCraneUrl.83474cdd.js";import{u as S,a as v,b as A}from"./useIsValidPanel.18ece626.js";const T=y.memo(({panel:t,selectedDashboard:r})=>{var n,C,R;const c=a(o=>o.config.chartBaselineHeight),i=a(o=>o.config.chartDefaultHeight),u=a(o=>o.insight.selectedNamespace),d=B(),m=S({panel:t}),g=v({selectedDashboard:r}),h=A({panelId:t.id,selectedDashboard:r}),f=((n=t==null?void 0:t.gridPos)==null?void 0:n.w)>0&&((C=t==null?void 0:t.gridPos)==null?void 0:C.w)<=24?Math.floor(t.gridPos.w/2):6,U=(R=t==null?void 0:t.gridPos)!=null&&R.h?Math.max(t.gridPos.h*c,i):i,P=o=>o.title==="CPU Utilization"||o.title==="CPU Requests"||o.title==="RAM Utilization"||o.title==="RAM Requests"||o.title==="Node CPU Utilization"||o.title==="Node Memory Utilization";let s=null;return(t==null?void 0:t.title)==="CPU Utilization"?s="CPU\u5229\u7528\u7387":(t==null?void 0:t.title)==="CPU Requests"?s="CPU\u8BF7\u6C42":(t==null?void 0:t.title)==="RAM Utilization"?s="\u5185\u5B58\u5229\u7528\u7387":(t==null?void 0:t.title)==="RAM Requests"?s="\u5185\u5B58\u8BF7\u6C42":(t==null?void 0:t.title)==="Node CPU Utilization"?s="\u8282\u70B9CPU\u5229\u7528\u7387":(t==null?void 0:t.title)==="Node Memory Utilization"&&(s="\u8282\u70B9\u5185\u5B58\u5229\u7528\u7387"),g&&!u||!m?null:e(l,{children:P(t)&&e(z,{span:f,children:M(N,{style:{marginBottom:"0.5rem",marginTop:"0.5rem",height:U},children:[e("div",{children:s}),e("iframe",{frameBorder:"0",height:"100%",src:`${d}/grafana/d-solo/${r==null?void 0:r.uid}/costs-by-dimension?${h}`,width:"100%"})]})},t.id)})});var $=w.exports.memo(()=>{var d,m,g,h,f,U,P;const{t}=x(),r=B();console.log("craneUrl",r);const c=F({craneUrl:r},{skip:!r});console.log("dashboardList",c);const i=((d=c==null?void 0:c.data)!=null?d:[]).find(s=>s.uid==="cluster-overview");console.log("selectedDashboard",i);const u=q({dashboardUid:i==null?void 0:i.uid},{skip:!(i!=null&&i.uid)});return console.log("dashboardDetail",u),e(l,{children:e(H,{style:{marginTop:10},children:!(i!=null&&i.uid)||((h=(g=(m=u==null?void 0:u.data)==null?void 0:m.dashboard)==null?void 0:g.panels)==null?void 0:h.length)===0?e("span",{children:t("\u6682\u65E0\u6570\u636E")}):((P=(U=(f=u==null?void 0:u.data)==null?void 0:f.dashboard)==null?void 0:U.panels)!=null?P:[]).map(s=>e(T,{panel:s,selectedDashboard:i},s.id))})})});export{$ as default};
