import{R,u as N,a as P,b as l,c as F,j as e,d as B,e as p,i as c,r as O,C as W,f as H,g as T,h as k,F as Q,k as U}from"./index.3b561666.js";import{C as v}from"./common.module.d7e709a7.js";import{C as S}from"./Card.9a509bf5.js";import{R as x}from"./index.87084703.js";import{D as C}from"./index.4313e517.js";import{I as j}from"./index.0420192b.js";import{u as I}from"./useCraneUrl.ac6187d2.js";import{u as M,a as $,b as q}from"./useIsValidPanel.6cc44449.js";import"./Check.92a180f9.js";import"./DateRangePicker.129f4a98.js";const E=R.memo(()=>{var a;const i=N(),{t:s}=P(),n=l(t=>t.insight.customRange),r=l(t=>t.insight.window),o=l(t=>t.insight.discount),u=F();return e("div",{className:B(v.pageWithPadding,v.pageWithColor),children:p(S,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:[p("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:"1rem",marginTop:5,marginBottom:5},children:[e("div",{style:{marginRight:"0.5rem",width:"70px"},children:s("\u65F6\u95F4\u8303\u56F4")}),e("div",{style:{marginRight:"0.5rem"},children:e(x.Group,{value:r,onChange:t=>{i(c.window(t));const[d,g]=O[t];i(c.customRange({start:d.toDate().toISOString(),end:g.toDate().toISOString()}))},children:u.map(t=>e(x.Button,{value:t.value,children:t.text},t.value))})}),e(C,{mode:"date",style:{marginRight:"0.5rem"},value:n==null?void 0:n.start,onChange:t=>{i(c.window(null)),i(c.customRange({...n,start:t}))}}),e(C,{mode:"date",style:{marginRight:"0.5rem"},value:(a=n==null?void 0:n.end)!=null?a:null,onChange:t=>{i(c.window(null)),i(c.customRange({...n,end:t}))}})]}),p("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:"1rem",marginTop:5,marginBottom:5},children:[e("div",{style:{marginRight:"1rem",width:"70px"},children:s("Discount")}),e(j,{min:0,theme:"column",value:o,onChange:t=>{i(c.discount(t))}})]})]})})}),G=R.memo(({panel:i,selectedDashboard:s})=>{var h,m,y;const n=l(f=>f.config.chartBaselineHeight),r=l(f=>f.config.chartDefaultHeight),o=l(f=>f.insight.selectedNamespace),u=I(),a=M({panel:i}),t=$({selectedDashboard:s}),d=q({panelId:i.id,selectedDashboard:s}),g=((h=i==null?void 0:i.gridPos)==null?void 0:h.w)>0&&((m=i==null?void 0:i.gridPos)==null?void 0:m.w)<=24?Math.floor(i.gridPos.w/2):6,w=(y=i==null?void 0:i.gridPos)!=null&&y.h?Math.max(i.gridPos.h*n,r):r;return t&&!o||!a?null:e(W,{span:g,children:e(S,{style:{marginBottom:"0.5rem",marginTop:"0.5rem",height:w},children:e("iframe",{frameBorder:"0",height:"100%",src:`${u}/grafana/d-solo/${s==null?void 0:s.uid}/costs-by-dimension?${d}`,width:"100%"})})},i.id)});var D=H.exports.memo(()=>{var u,a,t,d,g,w,h;const{t:i}=P(),s=I(),n=T({craneUrl:s},{skip:!s}),r=((u=n==null?void 0:n.data)!=null?u:[]).find(m=>m.uid==="cluster-overview"),o=k({dashboardUid:r==null?void 0:r.uid},{skip:!(r!=null&&r.uid)});return p(Q,{children:[e(E,{}),e(U,{style:{marginTop:10},children:!(r!=null&&r.uid)||((d=(t=(a=o==null?void 0:o.data)==null?void 0:a.dashboard)==null?void 0:t.panels)==null?void 0:d.length)===0?e("span",{children:i("\u6682\u65E0\u6570\u636E")}):((h=(w=(g=o==null?void 0:o.data)==null?void 0:g.dashboard)==null?void 0:w.panels)!=null?h:[]).map(m=>e(G,{panel:m,selectedDashboard:r},m.id))})]})});export{D as default};
